è
UC:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\WeatherForecast.cs
	namespace 	

ConjuntaU2
 
{ 
public 

class 
WeatherForecast  
{ 
public 
DateOnly 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
TemperatureC 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
int		 
TemperatureF		 
=>		  "
$num		# %
+		& '
(		( )
int		) ,
)		, -
(		- .
TemperatureC		. :
/		; <
$num		= C
)		C D
;		D E
public 
string 
? 
Summary 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ë
MC:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddDbContext 
<  
ApplicationDbContext 2
>2 3
(3 4
options4 ;
=>< >
options 
. 
UseSqlServer 
( 
builder  
.  !
Configuration! .
.. /
GetConnectionString/ B
(B C
$strC V
)V W
)W X
)X Y
;Y Z
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app 
. 
UseHttpsRedirection 
( 
) 
; 
app 
. 
UseAuthorization 
( 
) 
; 
app 
. 
MapControllers 
( 
) 
; 
app 
. 
Run 
( 
) 	
;	 
Œ

SC:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\Models\Ventas.cs
	namespace 	

ConjuntaU2
 
. 
Models 
{ 
public 

class 
Venta 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 

ProductoId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
Cantidad 
{ 
get !
;! "
set# &
;& '
}( )
public 
DateTime 
Fecha 
{ 
get  #
;# $
set% (
;( )
}* +
}		 
public 

class 
VentaRequest 
{ 
public 
int 

ProductoId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
Cantidad 
{ 
get !
;! "
set# &
;& '
}( )
} 
} à

VC:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\Models\Productos.cs
	namespace 	

ConjuntaU2
 
. 
Models 
{ 
public 

class 
	Productos 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
Precio 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
int		 
CantidadStock		  
{		! "
get		# &
;		& '
set		( +
;		+ ,
}		- .
public

 
int

 
CategoriaId

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
public 

Categorias 
	Categoria #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} 
} š
UC:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\Models\Clientes.cs
	namespace 	

ConjuntaU2
 
. 
Models 
{ 
public 

class 
Clientes 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Apellido 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public		 
string		 
Telefono		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
} 
} ì
WC:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\Models\Categorias.cs
	namespace 	

ConjuntaU2
 
. 
Models 
{ 
public 

class 

Categorias 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
}		 
}

 þ
oC:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\Migrations\20250123223030_AddFechaToVenta.cs
	namespace 	

ConjuntaU2
 
. 

Migrations 
{ 
public 

partial 
class 
AddFechaToVenta (
:) *
	Migration+ 4
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
DropForeignKey +
(+ ,
name 
: 
$str 6
,6 7
table 
: 
$str 
)  
;  !
migrationBuilder 
. 
	DropIndex &
(& '
name 
: 
$str ,
,, -
table 
: 
$str 
)  
;  !
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str 
, 
table 
: 
$str 
)  
;  !
migrationBuilder 
. 
RenameColumn )
() *
name 
: 
$str "
," #
table 
: 
$str 
,  
newName 
: 
$str  
)  !
;! "
} 	
	protected   
override   
void   
Down    $
(  $ %
MigrationBuilder  % 5
migrationBuilder  6 F
)  F G
{!! 	
migrationBuilder"" 
."" 
RenameColumn"" )
("") *
name## 
:## 
$str## 
,## 
table$$ 
:$$ 
$str$$ 
,$$  
newName%% 
:%% 
$str%% %
)%%% &
;%%& '
migrationBuilder'' 
.'' 
	AddColumn'' &
<''& '
decimal''' .
>''. /
(''/ 0
name(( 
:(( 
$str(( 
,(( 
table)) 
:)) 
$str)) 
,))  
type** 
:** 
$str** %
,**% &
nullable++ 
:++ 
false++ 
,++  
defaultValue,, 
:,, 
$num,,  
),,  !
;,,! "
migrationBuilder.. 
... 
CreateIndex.. (
(..( )
name// 
:// 
$str// ,
,//, -
table00 
:00 
$str00 
,00  
column11 
:11 
$str11 $
)11$ %
;11% &
migrationBuilder33 
.33 
AddForeignKey33 *
(33* +
name44 
:44 
$str44 6
,446 7
table55 
:55 
$str55 
,55  
column66 
:66 
$str66 $
,66$ %
principalTable77 
:77 
$str77  +
,77+ ,
principalColumn88 
:88  
$str88! %
,88% &
onDelete99 
:99 
ReferentialAction99 +
.99+ ,
Cascade99, 3
)993 4
;994 5
}:: 	
};; 
}<< ‹]
lC:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\Migrations\20250123135144_InitalCreate.cs
	namespace 	

ConjuntaU2
 
. 

Migrations 
{ 
public		 

partial		 
class		 
InitalCreate		 %
:		& '
	Migration		( 1
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str "
," #
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Nombre 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 G
,G H
nullableI Q
:Q R
falseS X
)X Y
,Y Z
Descripcion 
=  !
table" '
.' (
Column( .
<. /
string/ 5
>5 6
(6 7
type7 ;
:; <
$str= L
,L M
nullableN V
:V W
falseX ]
)] ^
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 4
,4 5
x6 7
=>8 :
x; <
.< =
Id= ?
)? @
;@ A
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str  
,  !
columns 
: 
table 
=> !
new" %
{ 
Id   
=   
table   
.   
Column   %
<  % &
int  & )
>  ) *
(  * +
type  + /
:  / 0
$str  1 6
,  6 7
nullable  8 @
:  @ A
false  B G
)  G H
.!! 

Annotation!! #
(!!# $
$str!!$ 8
,!!8 9
$str!!: @
)!!@ A
,!!A B
Nombre"" 
="" 
table"" "
.""" #
Column""# )
<"") *
string""* 0
>""0 1
(""1 2
type""2 6
:""6 7
$str""8 G
,""G H
nullable""I Q
:""Q R
false""S X
)""X Y
,""Y Z
Apellido## 
=## 
table## $
.##$ %
Column##% +
<##+ ,
string##, 2
>##2 3
(##3 4
type##4 8
:##8 9
$str##: I
,##I J
nullable##K S
:##S T
false##U Z
)##Z [
,##[ \
Email$$ 
=$$ 
table$$ !
.$$! "
Column$$" (
<$$( )
string$$) /
>$$/ 0
($$0 1
type$$1 5
:$$5 6
$str$$7 F
,$$F G
nullable$$H P
:$$P Q
false$$R W
)$$W X
,$$X Y
Telefono%% 
=%% 
table%% $
.%%$ %
Column%%% +
<%%+ ,
string%%, 2
>%%2 3
(%%3 4
type%%4 8
:%%8 9
$str%%: I
,%%I J
nullable%%K S
:%%S T
false%%U Z
)%%Z [
}&& 
,&& 
constraints'' 
:'' 
table'' "
=>''# %
{(( 
table)) 
.)) 

PrimaryKey)) $
())$ %
$str))% 2
,))2 3
x))4 5
=>))6 8
x))9 :
.)): ;
Id)); =
)))= >
;))> ?
}** 
)** 
;** 
migrationBuilder,, 
.,, 
CreateTable,, (
(,,( )
name-- 
:-- 
$str-- !
,--! "
columns.. 
:.. 
table.. 
=>.. !
new.." %
{// 
Id00 
=00 
table00 
.00 
Column00 %
<00% &
int00& )
>00) *
(00* +
type00+ /
:00/ 0
$str001 6
,006 7
nullable008 @
:00@ A
false00B G
)00G H
.11 

Annotation11 #
(11# $
$str11$ 8
,118 9
$str11: @
)11@ A
,11A B
Nombre22 
=22 
table22 "
.22" #
Column22# )
<22) *
string22* 0
>220 1
(221 2
type222 6
:226 7
$str228 G
,22G H
nullable22I Q
:22Q R
false22S X
)22X Y
,22Y Z
Descripcion33 
=33  !
table33" '
.33' (
Column33( .
<33. /
string33/ 5
>335 6
(336 7
type337 ;
:33; <
$str33= L
,33L M
nullable33N V
:33V W
false33X ]
)33] ^
,33^ _
Precio44 
=44 
table44 "
.44" #
Column44# )
<44) *
decimal44* 1
>441 2
(442 3
type443 7
:447 8
$str449 H
,44H I
nullable44J R
:44R S
false44T Y
)44Y Z
,44Z [
CantidadStock55 !
=55" #
table55$ )
.55) *
Column55* 0
<550 1
int551 4
>554 5
(555 6
type556 :
:55: ;
$str55< A
,55A B
nullable55C K
:55K L
false55M R
)55R S
,55S T
CategoriaId66 
=66  !
table66" '
.66' (
Column66( .
<66. /
int66/ 2
>662 3
(663 4
type664 8
:668 9
$str66: ?
,66? @
nullable66A I
:66I J
false66K P
)66P Q
}77 
,77 
constraints88 
:88 
table88 "
=>88# %
{99 
table:: 
.:: 

PrimaryKey:: $
(::$ %
$str::% 3
,::3 4
x::5 6
=>::7 9
x::: ;
.::; <
Id::< >
)::> ?
;::? @
table;; 
.;; 

ForeignKey;; $
(;;$ %
name<< 
:<< 
$str<< C
,<<C D
column== 
:== 
x==  !
=>==" $
x==% &
.==& '
CategoriaId==' 2
,==2 3
principalTable>> &
:>>& '
$str>>( 4
,>>4 5
principalColumn?? '
:??' (
$str??) -
,??- .
onDelete@@  
:@@  !
ReferentialAction@@" 3
.@@3 4
Cascade@@4 ;
)@@; <
;@@< =
}AA 
)AA 
;AA 
migrationBuilderCC 
.CC 
CreateTableCC (
(CC( )
nameDD 
:DD 
$strDD 
,DD 
columnsEE 
:EE 
tableEE 
=>EE !
newEE" %
{FF 
IdGG 
=GG 
tableGG 
.GG 
ColumnGG %
<GG% &
intGG& )
>GG) *
(GG* +
typeGG+ /
:GG/ 0
$strGG1 6
,GG6 7
nullableGG8 @
:GG@ A
falseGGB G
)GGG H
.HH 

AnnotationHH #
(HH# $
$strHH$ 8
,HH8 9
$strHH: @
)HH@ A
,HHA B

ProductoIdII 
=II  
tableII! &
.II& '
ColumnII' -
<II- .
intII. 1
>II1 2
(II2 3
typeII3 7
:II7 8
$strII9 >
,II> ?
nullableII@ H
:IIH I
falseIIJ O
)IIO P
,IIP Q
CantidadJJ 
=JJ 
tableJJ $
.JJ$ %
ColumnJJ% +
<JJ+ ,
intJJ, /
>JJ/ 0
(JJ0 1
typeJJ1 5
:JJ5 6
$strJJ7 <
,JJ< =
nullableJJ> F
:JJF G
falseJJH M
)JJM N
,JJN O

FechaVentaKK 
=KK  
tableKK! &
.KK& '
ColumnKK' -
<KK- .
DateTimeKK. 6
>KK6 7
(KK7 8
typeKK8 <
:KK< =
$strKK> I
,KKI J
nullableKKK S
:KKS T
falseKKU Z
)KKZ [
,KK[ \
TotalLL 
=LL 
tableLL !
.LL! "
ColumnLL" (
<LL( )
decimalLL) 0
>LL0 1
(LL1 2
typeLL2 6
:LL6 7
$strLL8 G
,LLG H
nullableLLI Q
:LLQ R
falseLLS X
)LLX Y
}MM 
,MM 
constraintsNN 
:NN 
tableNN "
=>NN# %
{OO 
tablePP 
.PP 

PrimaryKeyPP $
(PP$ %
$strPP% 0
,PP0 1
xPP2 3
=>PP4 6
xPP7 8
.PP8 9
IdPP9 ;
)PP; <
;PP< =
tableQQ 
.QQ 

ForeignKeyQQ $
(QQ$ %
nameRR 
:RR 
$strRR >
,RR> ?
columnSS 
:SS 
xSS  !
=>SS" $
xSS% &
.SS& '

ProductoIdSS' 1
,SS1 2
principalTableTT &
:TT& '
$strTT( 3
,TT3 4
principalColumnUU '
:UU' (
$strUU) -
,UU- .
onDeleteVV  
:VV  !
ReferentialActionVV" 3
.VV3 4
CascadeVV4 ;
)VV; <
;VV< =
}WW 
)WW 
;WW 
migrationBuilderYY 
.YY 
CreateIndexYY (
(YY( )
nameZZ 
:ZZ 
$strZZ 0
,ZZ0 1
table[[ 
:[[ 
$str[[ "
,[[" #
column\\ 
:\\ 
$str\\ %
)\\% &
;\\& '
migrationBuilder^^ 
.^^ 
CreateIndex^^ (
(^^( )
name__ 
:__ 
$str__ ,
,__, -
table`` 
:`` 
$str`` 
,``  
columnaa 
:aa 
$straa $
)aa$ %
;aa% &
}bb 	
	protectedee 
overrideee 
voidee 
Downee  $
(ee$ %
MigrationBuilderee% 5
migrationBuilderee6 F
)eeF G
{ff 	
migrationBuildergg 
.gg 
	DropTablegg &
(gg& '
namehh 
:hh 
$strhh  
)hh  !
;hh! "
migrationBuilderjj 
.jj 
	DropTablejj &
(jj& '
namekk 
:kk 
$strkk 
)kk 
;kk  
migrationBuildermm 
.mm 
	DropTablemm &
(mm& '
namenn 
:nn 
$strnn !
)nn! "
;nn" #
migrationBuilderpp 
.pp 
	DropTablepp &
(pp& '
nameqq 
:qq 
$strqq "
)qq" #
;qq# $
}rr 	
}ss 
}tt ¿
`C:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\DesingTimeDbContextFactory.cs
	namespace 	

ConjuntaU2
 
{ 
public 

class &
DesignTimeDbContextFactory +
:, -'
IDesignTimeDbContextFactory. I
<I J 
ApplicationDbContextJ ^
>^ _
{		 
public

  
ApplicationDbContext

 #
CreateDbContext

$ 3
(

3 4
string

4 :
[

: ;
]

; <
args

= A
)

A B
{ 	
var 
optionsBuilder 
=  
new! $#
DbContextOptionsBuilder% <
<< = 
ApplicationDbContext= Q
>Q R
(R S
)S T
;T U
var 
configuration 
= 
new  # 
ConfigurationBuilder$ 8
(8 9
)9 :
. 
SetBasePath 
( 
	Directory &
.& '
GetCurrentDirectory' :
(: ;
); <
)< =
. 
AddJsonFile 
( 
$str /
)/ 0
. 
Build 
( 
) 
; 
optionsBuilder 
. 
UseSqlServer '
(' (
configuration( 5
.5 6
GetConnectionString6 I
(I J
$strJ ]
)] ^
)^ _
;_ `
return 
new  
ApplicationDbContext +
(+ ,
optionsBuilder, :
.: ;
Options; B
)B C
;C D
} 	
} 
} ú
kC:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\Controllers\WeatherForecastController.cs
	namespace 	

ConjuntaU2
 
. 
Controllers  
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class %
WeatherForecastController *
:+ ,
ControllerBase- ;
{ 
private		 
static		 
readonly		 
string		  &
[		& '
]		' (
	Summaries		) 2
=		3 4
new		5 8
[		8 9
]		9 :
{

 	
$str 
, 
$str !
,! "
$str# +
,+ ,
$str- 3
,3 4
$str5 ;
,; <
$str= C
,C D
$strE L
,L M
$strN S
,S T
$strU a
,a b
$strc n
} 	
;	 

private 
readonly 
ILogger  
<  !%
WeatherForecastController! :
>: ;
_logger< C
;C D
public %
WeatherForecastController (
(( )
ILogger) 0
<0 1%
WeatherForecastController1 J
>J K
loggerL R
)R S
{ 	
_logger 
= 
logger 
; 
} 	
[ 	
HttpGet	 
( 
Name 
= 
$str ,
), -
]- .
public 
IEnumerable 
< 
WeatherForecast *
>* +
Get, /
(/ 0
)0 1
{ 	
return 

Enumerable 
. 
Range #
(# $
$num$ %
,% &
$num' (
)( )
.) *
Select* 0
(0 1
index1 6
=>7 9
new: =
WeatherForecast> M
{ 
Date 
= 
DateOnly 
.  
FromDateTime  ,
(, -
DateTime- 5
.5 6
Now6 9
.9 :
AddDays: A
(A B
indexB G
)G H
)H I
,I J
TemperatureC 
= 
Random %
.% &
Shared& ,
., -
Next- 1
(1 2
-2 3
$num3 5
,5 6
$num7 9
)9 :
,: ;
Summary 
= 
	Summaries #
[# $
Random$ *
.* +
Shared+ 1
.1 2
Next2 6
(6 7
	Summaries7 @
.@ A
LengthA G
)G H
]H I
} 
) 
. 
ToArray 
( 
) 
; 
} 	
}   
}!! ¥D
bC:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\Controllers\VentasController.cs
	namespace 	

ConjuntaU2
 
. 
Controllers  
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
VentasController		 !
:		" #
ControllerBase		$ 2
{

 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public 
VentasController 
(   
ApplicationDbContext  4
context5 <
)< =
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Venta3 8
>8 9
>9 :
>: ;
	GetVentas< E
(E F
)F G
{ 	
return 
await 
_context !
.! "
Ventas" (
.( )
Include) 0
(0 1
v1 2
=>3 5
v6 7
.7 8

ProductoId8 B
)B C
.C D
ToListAsyncD O
(O P
)P Q
;Q R
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Venta' ,
>, -
>- .
GetVenta/ 7
(7 8
int8 ;
id< >
)> ?
{ 	
var 
venta 
= 
await 
_context &
.& '
Ventas' -
.- .
Include. 5
(5 6
v6 7
=>8 :
v; <
.< =

ProductoId= G
)G H
.H I
FirstOrDefaultAsyncI \
(\ ]
v] ^
=>_ a
vb c
.c d
Idd f
==g i
idj l
)l m
;m n
if 
( 
venta 
== 
null 
) 
{ 
return   
NotFound   
(    
)    !
;  ! "
}!! 
return"" 
venta"" 
;"" 
}## 	
[&& 	
HttpPost&&	 
]&& 
['' 	
HttpPost''	 
]'' 
[(( 	
Route((	 
((( 
$str(( 
)(( 
](( 
public)) 
async)) 
Task)) 
<)) 
IActionResult)) '
>))' (
RegistrarVenta))) 7
())7 8
[))8 9
FromBody))9 A
]))A B
VentaRequest))C O
ventaRequest))P \
)))\ ]
{** 	
var++ 
producto++ 
=++ 
await++  
_context++! )
.++) *
	Productos++* 3
.++3 4
	FindAsync++4 =
(++= >
ventaRequest++> J
.++J K

ProductoId++K U
)++U V
;++V W
if,, 
(,, 
producto,, 
==,, 
null,,  
),,  !
{-- 
return.. 
NotFound.. 
(..  
$"..  "
$str.." G
{..G H
ventaRequest..H T
...T U

ProductoId..U _
}.._ `
$str..` a
"..a b
)..b c
;..c d
}// 
if11 
(11 
producto11 
.11 
CantidadStock11 &
<11' (
ventaRequest11) 5
.115 6
Cantidad116 >
)11> ?
{22 
return33 

BadRequest33 !
(33! "
$str33" N
)33N O
;33O P
}44 
producto77 
.77 
CantidadStock77 "
-=77# %
ventaRequest77& 2
.772 3
Cantidad773 ;
;77; <
var:: 
venta:: 
=:: 
new:: 
Venta:: !
{;; 

ProductoId<< 
=<< 
ventaRequest<< )
.<<) *

ProductoId<<* 4
,<<4 5
Cantidad== 
=== 
ventaRequest== '
.==' (
Cantidad==( 0
,==0 1
Fecha>> 
=>> 
DateTime>>  
.>>  !
UtcNow>>! '
}?? 
;?? 
_context@@ 
.@@ 
Ventas@@ 
.@@ 
Add@@ 
(@@  
venta@@  %
)@@% &
;@@& '
awaitCC 
_contextCC 
.CC 
SaveChangesAsyncCC +
(CC+ ,
)CC, -
;CC- .
returnEE 
OkEE 
(EE 
newEE 
{FF 
mensajeGG 
=GG 
$strGG ;
,GG; <
ventaHH 
=HH 
newHH 
{II 
ventaJJ 
.JJ 
IdJJ 
,JJ 
ventaKK 
.KK 

ProductoIdKK $
,KK$ %
ventaLL 
.LL 
CantidadLL "
,LL" #
ventaMM 
.MM 
FechaMM 
}NN 
,NN 
productoOO 
=OO 
newOO 
{PP 
productoQQ 
.QQ 
IdQQ 
,QQ  
productoRR 
.RR 
NombreRR #
,RR# $
productoSS 
.SS 
CantidadStockSS *
}TT 
}UU 
)UU 
;UU 
}VV 	
[ZZ 	
HttpPutZZ	 
(ZZ 
$strZZ 
)ZZ 
]ZZ 
public[[ 
async[[ 
Task[[ 
<[[ 
IActionResult[[ '
>[[' (
PutVenta[[) 1
([[1 2
int[[2 5
id[[6 8
,[[8 9
Venta[[: ?
venta[[@ E
)[[E F
{\\ 	
if]] 
(]] 
id]] 
!=]] 
venta]] 
.]] 
Id]] 
)]] 
{^^ 
return__ 

BadRequest__ !
(__! "
)__" #
;__# $
}`` 
_contextaa 
.aa 
Entryaa 
(aa 
ventaaa  
)aa  !
.aa! "
Stateaa" '
=aa( )
EntityStateaa* 5
.aa5 6
Modifiedaa6 >
;aa> ?
trybb 
{cc 
awaitdd 
_contextdd 
.dd 
SaveChangesAsyncdd /
(dd/ 0
)dd0 1
;dd1 2
}ee 
catchff 
(ff (
DbUpdateConcurrencyExceptionff /
)ff/ 0
{gg 
ifhh 
(hh 
!hh 
_contexthh 
.hh 
Ventashh $
.hh$ %
Anyhh% (
(hh( )
ehh) *
=>hh+ -
ehh. /
.hh/ 0
Idhh0 2
==hh3 5
idhh6 8
)hh8 9
)hh9 :
{ii 
returnjj 
NotFoundjj #
(jj# $
)jj$ %
;jj% &
}kk 
throwll 
;ll 
}mm 
returnnn 
	NoContentnn 
(nn 
)nn 
;nn 
}oo 	
[rr 	

HttpDeleterr	 
(rr 
$strrr 
)rr 
]rr 
publicss 
asyncss 
Taskss 
<ss 
IActionResultss '
>ss' (
DeleteVentass) 4
(ss4 5
intss5 8
idss9 ;
)ss; <
{tt 	
varuu 
ventauu 
=uu 
awaituu 
_contextuu &
.uu& '
Ventasuu' -
.uu- .
	FindAsyncuu. 7
(uu7 8
iduu8 :
)uu: ;
;uu; <
ifvv 
(vv 
ventavv 
==vv 
nullvv 
)vv 
{ww 
returnxx 
NotFoundxx 
(xx  
)xx  !
;xx! "
}yy 
_contextzz 
.zz 
Ventaszz 
.zz 
Removezz "
(zz" #
ventazz# (
)zz( )
;zz) *
await{{ 
_context{{ 
.{{ 
SaveChangesAsync{{ +
({{+ ,
){{, -
;{{- .
return|| 
	NoContent|| 
(|| 
)|| 
;|| 
}}} 	
}~~ 
} —:
eC:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\Controllers\ProductosController.cs
	namespace 	

ConjuntaU2
 
. 
Controllers  
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
ProductosController		 $
:		% &
ControllerBase		' 5
{

 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public 
ProductosController "
(" # 
ApplicationDbContext# 7
context8 ?
)? @
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
	Productos3 <
>< =
>= >
>> ?
GetProductos@ L
(L M
)M N
{ 	
return 
await 
_context !
.! "
	Productos" +
.+ ,
Include, 3
(3 4
p4 5
=>6 8
p9 :
.: ;
	Categoria; D
)D E
.E F
ToListAsyncF Q
(Q R
)R S
;S T
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
	Productos' 0
>0 1
>1 2
GetProducto3 >
(> ?
int? B
idC E
)E F
{ 	
var 
producto 
= 
await  
_context! )
.) *
	Productos* 3
.3 4
Include4 ;
(; <
p< =
=>> @
pA B
.B C
	CategoriaC L
)L M
.M N
FirstOrDefaultAsyncN a
(a b
pb c
=>d f
pg h
.h i
Idi k
==l n
ido q
)q r
;r s
if 
( 
producto 
== 
null  
)  !
{ 
return   
NotFound   
(    
)    !
;  ! "
}!! 
return"" 
producto"" 
;"" 
}## 	
[%% 	
HttpPost%%	 
]%% 
public&& 
async&& 
Task&& 
<&& 
IActionResult&& '
>&&' (
PostProducto&&) 5
(&&5 6
	Productos&&6 ?
producto&&@ H
)&&H I
{'' 	
if)) 
()) 
producto)) 
==)) 
null))  
)))  !
{** 
return++ 

BadRequest++ !
(++! "
$str++" B
)++B C
;++C D
},, 
var// 
categoriaExiste// 
=//  !
await//" '
_context//( 0
.//0 1

Categorias//1 ;
.//; <
	FindAsync//< E
(//E F
producto//F N
.//N O
CategoriaId//O Z
)//Z [
;//[ \
if00 
(00 
categoriaExiste00 
==00  "
null00# '
)00' (
{11 
return22 

BadRequest22 !
(22! "
$str22" H
)22H I
;22I J
}33 
producto66 
.66 
	Categoria66 
=66  
null66! %
;66% &
_context99 
.99 
	Productos99 
.99 
Add99 "
(99" #
producto99# +
)99+ ,
;99, -
await<< 
_context<< 
.<< 
SaveChangesAsync<< +
(<<+ ,
)<<, -
;<<- .
return@@ 
Ok@@ 
(@@ 
producto@@ 
)@@ 
;@@  
}AA 	
[CC 	
HttpPutCC	 
(CC 
$strCC (
)CC( )
]CC) *
publicDD 
asyncDD 
TaskDD 
<DD 
IActionResultDD '
>DD' (
ActualizarStockDD) 8
(DD8 9
intDD9 <
idDD= ?
,DD? @
[DDA B
FromBodyDDB J
]DDJ K
intDDL O
nuevaCantidadStockDDP b
)DDb c
{EE 	
varGG 
productoGG 
=GG 
awaitGG  
_contextGG! )
.GG) *
	ProductosGG* 3
.GG3 4
	FindAsyncGG4 =
(GG= >
idGG> @
)GG@ A
;GGA B
ifHH 
(HH 
productoHH 
==HH 
nullHH  
)HH  !
{II 
returnJJ 
NotFoundJJ 
(JJ  
$"JJ  "
$strJJ" G
{JJG H
idJJH J
}JJJ K
$strJJK L
"JJL M
)JJM N
;JJN O
}KK 
ifNN 
(NN 
nuevaCantidadStockNN "
<NN# $
$numNN% &
)NN& '
{OO 
returnPP 

BadRequestPP !
(PP! "
$strPP" O
)PPO P
;PPP Q
}QQ 
productoTT 
.TT 
CantidadStockTT "
=TT# $
nuevaCantidadStockTT% 7
;TT7 8
awaitUU 
_contextUU 
.UU 
SaveChangesAsyncUU +
(UU+ ,
)UU, -
;UU- .
returnXX 
OkXX 
(XX 
newXX 
{YY 
mensajeZZ 
=ZZ 
$strZZ <
,ZZ< =
producto[[ 
=[[ 
new[[ 
{\\ 
producto]] 
.]] 
Id]] 
,]]  
producto^^ 
.^^ 
Nombre^^ #
,^^# $
producto__ 
.__ 
CantidadStock__ *
}`` 
}aa 
)aa 
;aa 
}bb 	
[ff 	

HttpDeleteff	 
(ff 
$strff 
)ff 
]ff 
publicgg 
asyncgg 
Taskgg 
<gg 
IActionResultgg '
>gg' (
DeleteProductogg) 7
(gg7 8
intgg8 ;
idgg< >
)gg> ?
{hh 	
varii 
productoii 
=ii 
awaitii  
_contextii! )
.ii) *
	Productosii* 3
.ii3 4
	FindAsyncii4 =
(ii= >
idii> @
)ii@ A
;iiA B
ifjj 
(jj 
productojj 
==jj 
nulljj  
)jj  !
{kk 
returnll 
NotFoundll 
(ll  
)ll  !
;ll! "
}mm 
_contextnn 
.nn 
	Productosnn 
.nn 
Removenn %
(nn% &
productonn& .
)nn. /
;nn/ 0
awaitoo 
_contextoo 
.oo 
SaveChangesAsyncoo +
(oo+ ,
)oo, -
;oo- .
returnpp 
	NoContentpp 
(pp 
)pp 
;pp 
}qq 	
}rr 
}ss õ/
dC:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\Controllers\ClientesController.cs
	namespace 	

ConjuntaU2
 
. 
Controllers  
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
ClientesController		 #
:		$ %
ControllerBase		& 4
{

 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public 
ClientesController !
(! " 
ApplicationDbContext" 6
context7 >
)> ?
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Clientes3 ;
>; <
>< =
>= >
GetClientes? J
(J K
)K L
{ 	
return 
await 
_context !
.! "
Clientes" *
.* +
ToListAsync+ 6
(6 7
)7 8
;8 9
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Clientes' /
>/ 0
>0 1

GetCliente2 <
(< =
int= @
idA C
)C D
{ 	
var 
cliente 
= 
await 
_context  (
.( )
Clientes) 1
.1 2
	FindAsync2 ;
(; <
id< >
)> ?
;? @
if 
( 
cliente 
== 
null 
)  
{ 
return   
NotFound   
(    
)    !
;  ! "
}!! 
return"" 
cliente"" 
;"" 
}## 	
[&& 	
HttpPost&&	 
]&& 
public'' 
async'' 
Task'' 
<'' 
ActionResult'' &
<''& '
Clientes''' /
>''/ 0
>''0 1
PostCliente''2 =
(''= >
Clientes''> F
cliente''G N
)''N O
{(( 	
_context)) 
.)) 
Clientes)) 
.)) 
Add)) !
())! "
cliente))" )
)))) *
;))* +
await** 
_context** 
.** 
SaveChangesAsync** +
(**+ ,
)**, -
;**- .
return++ 
CreatedAtAction++ "
(++" #
nameof++# )
(++) *

GetCliente++* 4
)++4 5
,++5 6
new++7 :
{++; <
id++= ?
=++@ A
cliente++B I
.++I J
Id++J L
}++M N
,++N O
cliente++P W
)++W X
;++X Y
},, 	
[// 	
HttpPut//	 
(// 
$str// 
)// 
]// 
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (

PutCliente00) 3
(003 4
int004 7
id008 :
,00: ;
Clientes00< D
cliente00E L
)00L M
{11 	
if22 
(22 
id22 
!=22 
cliente22 
.22 
Id22  
)22  !
{33 
return44 

BadRequest44 !
(44! "
)44" #
;44# $
}55 
_context66 
.66 
Entry66 
(66 
cliente66 "
)66" #
.66# $
State66$ )
=66* +
EntityState66, 7
.667 8
Modified668 @
;66@ A
try77 
{88 
await99 
_context99 
.99 
SaveChangesAsync99 /
(99/ 0
)990 1
;991 2
}:: 
catch;; 
(;; (
DbUpdateConcurrencyException;; /
);;/ 0
{<< 
if== 
(== 
!== 
_context== 
.== 
Clientes== &
.==& '
Any==' *
(==* +
e==+ ,
=>==- /
e==0 1
.==1 2
Id==2 4
====5 7
id==8 :
)==: ;
)==; <
{>> 
return?? 
NotFound?? #
(??# $
)??$ %
;??% &
}@@ 
throwAA 
;AA 
}BB 
returnCC 
	NoContentCC 
(CC 
)CC 
;CC 
}DD 	
[GG 	

HttpDeleteGG	 
(GG 
$strGG 
)GG 
]GG 
publicHH 
asyncHH 
TaskHH 
<HH 
IActionResultHH '
>HH' (
DeleteClienteHH) 6
(HH6 7
intHH7 :
idHH; =
)HH= >
{II 	
varJJ 
clienteJJ 
=JJ 
awaitJJ 
_contextJJ  (
.JJ( )
ClientesJJ) 1
.JJ1 2
	FindAsyncJJ2 ;
(JJ; <
idJJ< >
)JJ> ?
;JJ? @
ifKK 
(KK 
clienteKK 
==KK 
nullKK 
)KK  
{LL 
returnMM 
NotFoundMM 
(MM  
)MM  !
;MM! "
}NN 
_contextOO 
.OO 
ClientesOO 
.OO 
RemoveOO $
(OO$ %
clienteOO% ,
)OO, -
;OO- .
awaitPP 
_contextPP 
.PP 
SaveChangesAsyncPP +
(PP+ ,
)PP, -
;PP- .
returnQQ 
	NoContentQQ 
(QQ 
)QQ 
;QQ 
}RR 	
}SS 
}TT ·0
fC:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\Controllers\CategoriasController.cs
	namespace 	

ConjuntaU2
 
. 
Controllers  
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		  
CategoriasController		 %
:		& '
ControllerBase		( 6
{

 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public  
CategoriasController #
(# $ 
ApplicationDbContext$ 8
context9 @
)@ A
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3

Categorias3 =
>= >
>> ?
>? @
GetCategoriasA N
(N O
)O P
{ 	
return 
await 
_context !
.! "

Categorias" ,
., -
ToListAsync- 8
(8 9
)9 :
;: ;
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '

Categorias' 1
>1 2
>2 3
GetCategoria4 @
(@ A
intA D
idE G
)G H
{ 	
var 
	categoria 
= 
await !
_context" *
.* +

Categorias+ 5
.5 6
	FindAsync6 ?
(? @
id@ B
)B C
;C D
if 
( 
	categoria 
== 
null !
)! "
{ 
return   
NotFound   
(    
)    !
;  ! "
}!! 
return"" 
	categoria"" 
;"" 
}## 	
[&& 	
HttpPost&&	 
]&& 
public'' 
async'' 
Task'' 
<'' 
ActionResult'' &
<''& '

Categorias''' 1
>''1 2
>''2 3
PostCategoria''4 A
(''A B

Categorias''B L
	categoria''M V
)''V W
{(( 	
_context)) 
.)) 

Categorias)) 
.))  
Add))  #
())# $
	categoria))$ -
)))- .
;)). /
await** 
_context** 
.** 
SaveChangesAsync** +
(**+ ,
)**, -
;**- .
return++ 
CreatedAtAction++ "
(++" #
nameof++# )
(++) *
GetCategoria++* 6
)++6 7
,++7 8
new++9 <
{++= >
id++? A
=++B C
	categoria++D M
.++M N
Id++N P
}++Q R
,++R S
	categoria++T ]
)++] ^
;++^ _
},, 	
[// 	
HttpPut//	 
(// 
$str// 
)// 
]// 
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (
PutCategoria00) 5
(005 6
int006 9
id00: <
,00< =

Categorias00> H
	categoria00I R
)00R S
{11 	
if22 
(22 
id22 
!=22 
	categoria22 
.22  
Id22  "
)22" #
{33 
return44 

BadRequest44 !
(44! "
)44" #
;44# $
}55 
_context66 
.66 
Entry66 
(66 
	categoria66 $
)66$ %
.66% &
State66& +
=66, -
EntityState66. 9
.669 :
Modified66: B
;66B C
try77 
{88 
await99 
_context99 
.99 
SaveChangesAsync99 /
(99/ 0
)990 1
;991 2
}:: 
catch;; 
(;; (
DbUpdateConcurrencyException;; /
);;/ 0
{<< 
if== 
(== 
!== 
_context== 
.== 

Categorias== (
.==( )
Any==) ,
(==, -
e==- .
=>==/ 1
e==2 3
.==3 4
Id==4 6
====7 9
id==: <
)==< =
)=== >
{>> 
return?? 
NotFound?? #
(??# $
)??$ %
;??% &
}@@ 
throwAA 
;AA 
}BB 
returnCC 
	NoContentCC 
(CC 
)CC 
;CC 
}DD 	
[GG 	

HttpDeleteGG	 
(GG 
$strGG 
)GG 
]GG 
publicHH 
asyncHH 
TaskHH 
<HH 
IActionResultHH '
>HH' (
DeleteCategoriaHH) 8
(HH8 9
intHH9 <
idHH= ?
)HH? @
{II 	
varJJ 
	categoriaJJ 
=JJ 
awaitJJ !
_contextJJ" *
.JJ* +

CategoriasJJ+ 5
.JJ5 6
	FindAsyncJJ6 ?
(JJ? @
idJJ@ B
)JJB C
;JJC D
ifKK 
(KK 
	categoriaKK 
==KK 
nullKK !
)KK! "
{LL 
returnMM 
NotFoundMM 
(MM  
)MM  !
;MM! "
}NN 
_contextOO 
.OO 

CategoriasOO 
.OO  
RemoveOO  &
(OO& '
	categoriaOO' 0
)OO0 1
;OO1 2
awaitPP 
_contextPP 
.PP 
SaveChangesAsyncPP +
(PP+ ,
)PP, -
;PP- .
returnQQ 
	NoContentQQ 
(QQ 
)QQ 
;QQ 
}RR 	
}SS 
}TT ž
RC:\Users\luise\source\repos\TestingSonarQube\ConjuntaU2\ConjuntaU2\AppDbContext.cs
	namespace 	

ConjuntaU2
 
{ 
public 

class  
ApplicationDbContext %
:& '
	DbContext( 1
{ 
public		  
ApplicationDbContext		 #
(		# $
DbContextOptions		$ 4
<		4 5 
ApplicationDbContext		5 I
>		I J
options		K R
)		R S
:		T U
base		V Z
(		Z [
options		[ b
)		b c
{		d e
}		f g
public 
DbSet 
< 

Categorias 
>  

Categorias! +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
DbSet 
< 
	Productos 
> 
	Productos  )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
DbSet 
< 
Venta 
> 
Ventas "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DbSet 
< 
Clientes 
> 
Clientes '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} 